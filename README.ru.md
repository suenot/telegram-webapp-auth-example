# –ü—Ä–∏–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Telegram WebApp

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∑–∞–ø—É—Å–∫–∞–µ–º–æ–º –∏–∑ Telegram-–±–æ—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ—Ö–∞–Ω–∏–∑–º–∞ `WebAppInitData`.

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:
*   `pyTelegramBotAPI` –¥–ª—è Telegram-–±–æ—Ç–∞.
*   `Flask` –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –±—ç–∫–µ–Ω–¥–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   `python-dotenv` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
*   –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python (`hmac`, `hashlib`, `json`, `urllib`) –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1.  **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start` –∏–ª–∏ `/login` Telegram-–±–æ—Ç—É.
2.  **–û—Ç–≤–µ—Ç –±–æ—Ç–∞:** –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É —Å `WebAppInfo` URL, —É–∫–∞–∑—ã–≤–∞—é—â–∏–º –Ω–∞ –Ω–∞—à–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
3.  **–ó–∞–ø—É—Å–∫ WebApp:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É. Telegram –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π URL –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ `initData`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.
4.  **–§—Ä–æ–Ω—Ç–µ–Ω–¥ (`index.html`):** –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `telegram-web-app.js` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ `window.Telegram.WebApp.initData` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç –±—ç–∫–µ–Ω–¥–∞ `/validate`.
5.  **–ë—ç–∫–µ–Ω–¥ (`app.py`):** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Flask –ø–æ–ª—É—á–∞–µ—Ç `initData` –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ `/validate`. –û–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É HMAC-SHA256, –∏—Å–ø–æ–ª—å–∑—É—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–π `TELEGRAM_BOT_TOKEN`, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–ª–∏–Ω–Ω—ã–µ –∏ –Ω–µ –±—ã–ª–∏ –ø–æ–¥–¥–µ–ª–∞–Ω—ã.
6.  **–†–µ–∑—É–ª—å—Ç–∞—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:** –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –±—ç–∫–µ–Ω–¥ –æ—Ç–≤–µ—á–∞–µ—Ç —É—Å–ø–µ—Ö–æ–º –∏ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —ç—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 403 Forbidden.

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant TelegramClient as –ö–ª–∏–µ–Ω—Ç Telegram
    participant TelegramBot as –ë—ç–∫–µ–Ω–¥ –ë–æ—Ç–∞ (bot.py)
    participant WebAppFE as –§—Ä–æ–Ω—Ç–µ–Ω–¥ WebApp (index.html)
    participant WebAppBE as –ë—ç–∫–µ–Ω–¥ WebApp (app.py)

    User->>TelegramClient: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É /start
    TelegramClient->>TelegramBot: –ü–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É
    TelegramBot-->>TelegramClient: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π WebApp (URL: WEBAPP_URL)
    TelegramClient-->>User: –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π

    User->>TelegramClient: –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É WebApp
    TelegramClient->>User: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
    Note right of User: –ë—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ WEBAPP_URL<br>Telegram –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ initData
    WebAppFE->>WebAppFE: –ó–∞–≥—Ä—É–∂–∞–µ—Ç telegram-web-app.js
    WebAppFE->>WebAppFE: –ü–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ window.Telegram.WebApp.initData

    WebAppFE->>WebAppBE: POST /validate (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç initData)
    WebAppBE->>WebAppBE: validate_init_data(initData, BOT_TOKEN)
    Note right of WebAppBE: 1. –ü–∞—Ä—Å–∏–Ω–≥ initData<br>2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏<br>3. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞<br>4. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ö–µ—à–∞<br>5. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–µ—à–µ–π
    alt –í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
        WebAppBE-->>WebAppFE: 200 OK (JSON: {status: 'success', user_info: {...}})
        WebAppFE->>User: –ü–æ–∫–∞–∑–∞—Ç—å "–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!" –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    else –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å
        WebAppBE-->>WebAppFE: 403 Forbidden (JSON: {status: 'error', message: '...'})
        WebAppFE->>User: –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
    end

```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ).**

2.  **–°–æ–∑–¥–∞–π—Ç–µ Telegram-–±–æ—Ç–∞:**
    *   –ü–æ–≥–æ–≤–æ—Ä–∏—Ç–µ —Å `@BotFather` –≤ Telegram.
    *   –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —Å –ø–æ–º–æ—â—å—é `/newbot`.
    *   –ó–∞–ø–∏—à–∏—Ç–µ **—Ç–æ–∫–µ–Ω HTTP API**, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π BotFather.

3.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    *   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º `.env` –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `bot.py`).
    *   –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ `.env`, –∑–∞–º–µ–Ω–∏–≤ –∑–∞–≥–ª—É—à–∫–∏:
        ```dotenv
        TELEGRAM_BOT_TOKEN="–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê_–ó–î–ï–°–¨"
        # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ngrok –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
        WEBAPP_URL="https://your-unique-ngrok-subdomain.ngrok-free.app"
        ```
    *   **–í–∞–∂–Ω–æ:** `WEBAPP_URL` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å HTTPS.

4.  **–°–¥–µ–ª–∞–π—Ç–µ –≤–∞—à–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã–º (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):**
    *   –ü–æ—Å–∫–æ–ª—å–∫—É –∫–ª–∏–µ–Ω—Ç—É Telegram –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —á–µ—Ä–µ–∑ HTTPS, –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤—Ä–æ–¥–µ `ngrok`, –µ—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ.
    *   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok: [https://ngrok.com/download](https://ngrok.com/download)
    *   –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Flask (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5001 –≤ `webapp/app.py`):
        ```bash
        ngrok http 5001
        ```
    *   Ngrok –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –≤–∞–º HTTPS URL –¥–ª—è –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://abcdef123456.ngrok-free.app`). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç URL –≤ –∫–∞—á–µ—Å—Ç–≤–µ `WEBAPP_URL` –≤ —Ñ–∞–π–ª–µ `.env`.

5.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements.txt
    ```

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–∞

1.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
    *   –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ `webapp`:
        ```bash
        cd webapp
        ```
    *   –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Flask:
        ```bash
        python app.py
        ```
    *   –ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —ç—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª.

2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Telegram-–±–æ—Ç–∞:**
    *   –û—Ç–∫—Ä–æ–π—Ç–µ *–Ω–æ–≤—ã–π* —Ç–µ—Ä–º–∏–Ω–∞–ª.
    *   –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –≤—ã –º–µ–Ω—è–ª–∏ –∫–∞—Ç–∞–ª–æ–≥):
        ```bash
        cd ..
        ```
    *   –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –±–æ—Ç–∞:
        ```bash
        python bot.py
        ```
    *   –ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —ç—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª.

3.  **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Telegram:**
    *   –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –≤–∞–º–∏ –±–æ—Ç–∞.
    *   –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`.
    *   –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Open Web App üîê".
    *   –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ Telegram, –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –ø–æ–∫–∞–∑–∞—Ç—å –ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–∞—à–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é `user_info` (–æ—Å–æ–±–µ–Ω–Ω–æ `id`) –≤ –≤–∞—à–µ–º –±—ç–∫–µ–Ω–¥–µ `webapp/app.py` –¥–ª—è:

*   **–°–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ Flask (–∏–ª–∏ –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä JWT), —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–∞–ª—Å—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–º –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–∞—à–µ–º—É –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏.
*   **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** –ù–∞–π–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∑–∞–ª–æ–≥–∏–Ω—å—Ç–µ –µ–≥–æ. –ï—Å–ª–∏ –Ω–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –µ–º—É –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Å–≤—è–∑–∞–≤ –µ–≥–æ Telegram ID —Å –Ω–æ–≤–æ–π –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ.
*   **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è, —Ñ–∞–º–∏–ª–∏—é –∏–ª–∏ —è–∑—ã–∫–æ–≤–æ–π –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ `user_info`) –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–ø—ã—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   **API-–≤—ã–∑–æ–≤–æ–≤:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö), —Å –µ–≥–æ –ª–∏—á–Ω–æ—Å—Ç—å—é.

–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ `user_info` –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–ª–∏ –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω–æ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ö–µ—à–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ.

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é HMAC

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Telegram Web App –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–≥–æ, —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ `initData`, –ø–æ–ª—É—á–µ–Ω–Ω–∞—è –≤–∞—à–∏–º –±—ç–∫–µ–Ω–¥–æ–º, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏—Å—Ö–æ–¥–∏—Ç –æ—Ç Telegram –∏ –Ω–µ –±—ã–ª–∞ –ø–æ–¥–¥–µ–ª–∞–Ω–∞. –≠—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ö–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ö–µ—à–∞ (HMAC)**, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ HMAC-SHA256.

–í–æ—Ç —Ä–∞–∑–±–∏–≤–∫–∞ —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:

1.  **–û–±—â–∏–π —Å–µ–∫—Ä–µ—Ç:** –û—Å–Ω–æ–≤–æ–π —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —è–≤–ª—è–µ—Ç—Å—è –≤–∞—à **`TELEGRAM_BOT_TOKEN`**. –≠—Ç–æ—Ç —Ç–æ–∫–µ–Ω –∏–∑–≤–µ—Å—Ç–µ–Ω *—Ç–æ–ª—å–∫–æ* –≤–∞–º (–≤–∞—à–µ–º—É –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–µ—Ä—É) –∏ Telegram. –û–Ω –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.

2.  **–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö Telegram:** –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–∞—à–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, Telegram –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É `initData`. –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π Telegram –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
    *   –°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è `initData`, *–∫—Ä–æ–º–µ* —Å–∞–º–æ–≥–æ `hash`.
    *   –°–æ—Ä—Ç–∏—Ä—É–µ—Ç —ç—Ç–∏ –ø–∞—Ä—ã –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø–æ –∫–ª—é—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `auth_date=...`, `query_id=...`, `user=...`).
    *   –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏—Ö –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, –≥–¥–µ –∫–∞–∂–¥–∞—è –ø–∞—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ (`–∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ
–∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ...`). –ù–∞–∑–æ–≤–µ–º —ç—Ç–æ `data-check-string`.
    *   –í—ã—á–∏—Å–ª—è–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º HMAC: `secret_key = HMAC_SHA256("WebAppData", TELEGRAM_BOT_TOKEN)`.
    *   –í—ã—á–∏—Å–ª—è–µ—Ç –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å—å (`hash`), —Å–Ω–æ–≤–∞ –ø—Ä–∏–º–µ–Ω—è—è HMAC-SHA256, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π `secret_key` –∏ `data-check-string`: `generated_hash = HMAC_SHA256(secret_key, data-check-string)`.
    *   Telegram –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç —ç—Ç–æ—Ç `generated_hash` –∫ `initData` –ø–æ–¥ –∫–ª—é—á–æ–º `hash` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç—Ä–æ–∫—É `initData` –∫–ª–∏–µ–Ω—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –µ–µ –≤–∞—à–µ–º—É –±—ç–∫–µ–Ω–¥—É.

3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (–í–∞—à –±—ç–∫–µ–Ω–¥):** –ö–æ–≥–¥–∞ –≤–∞—à —ç–Ω–¥–ø–æ–∏–Ω—Ç `/validate` –ø–æ–ª—É—á–∞–µ—Ç `initData`, –æ–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å *—Ç–æ—á–Ω–æ —Ç–µ –∂–µ —à–∞–≥–∏* –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —Ö–µ—à–∞:
    *   **–ü–∞—Ä—Å–∏–Ω–≥ `initData`:** –ò–∑–≤–ª–µ—á—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `hash` –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ.
    *   **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ `data-check-string`:** –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—É—é –ø–∞—Ä—É `hash`, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø–∞—Ä—ã –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø–æ –∫–ª—é—á—É –∏ —Å–æ–µ–¥–∏–Ω–∏—Ç—å –∏—Ö —Å–∏–º–≤–æ–ª–∞–º–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏, —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—è —Ñ–æ—Ä–º–∞—Ç—É Telegram.
    *   **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ `secret_key`:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å *–≤–∞—à* —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π `TELEGRAM_BOT_TOKEN` (–æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç) –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–≥–æ –∂–µ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞: `secret_key = HMAC_SHA256("WebAppData", YOUR_BOT_TOKEN)`.
    *   **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ö–µ—à–∞:** –í—ã—á–∏—Å–ª–∏—Ç—å —Ö–µ—à, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π `secret_key` –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é `data-check-string`: `expected_hash = HMAC_SHA256(secret_key, reconstructed_data_check_string)`.
    *   **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–µ—à–µ–π:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–≤–Ω–∏—Ç—å `expected_hash`, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ–ª—å–∫–æ —á—Ç–æ –≤—ã—á–∏—Å–ª–∏–ª –≤–∞—à —Å–µ—Ä–≤–µ—Ä, —Å `hash`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º –≤ `initData`.

4.  **–í–µ—Ä–¥–∏–∫—Ç:**
    *   **–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ:** –ï—Å–ª–∏ `expected_hash == received_hash`, —ç—Ç–æ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
        *   **–ü–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ *–¥–æ–ª–∂–Ω—ã* –±—ã–ª–∏ –∏—Å—Ö–æ–¥–∏—Ç—å –æ—Ç Telegram –¥–ª—è *–≤–∞—à–µ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞*. –¢–æ–ª—å–∫–æ Telegram, –∑–Ω–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `TELEGRAM_BOT_TOKEN`, –º–æ–≥ –≤—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `secret_key`, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ `hash` –¥–ª—è —ç—Ç–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π `data-check-string`. –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ–ª–∞—Ç—å —ç—Ç–æ.
        *   **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ –Ω–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã —Å —Ç–µ—Ö –ø–æ—Ä, –∫–∞–∫ Telegram –∏—Ö –ø–æ–¥–ø–∏—Å–∞–ª. –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, `auth_date` –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π –∏–∑–º–µ–Ω–∏–ª–æ –±—ã `data-check-string`, —á—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –±—ã –∫ –¥—Ä—É–≥–æ–º—É `expected_hash`, –∫–æ—Ç–æ—Ä—ã–π *–Ω–µ* —Å–æ–≤–ø–∞–ª –±—ã —Å `received_hash`.
    *   **–ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ:** –ï—Å–ª–∏ —Ö–µ—à–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç, –¥–∞–Ω–Ω—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ ‚Äì –ª–∏–±–æ –æ–Ω–∏ –ø—Ä–∏—à–ª–∏ –Ω–µ –æ—Ç Telegram, –ª–∏–±–æ –±—ã–ª–∏ –ø–æ–¥–¥–µ–ª–∞–Ω—ã, –ª–∏–±–æ –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏) –Ω–µ–≤–µ—Ä–Ω–∞. –í–∞—à —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å 403 Forbidden).

5.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ (–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∞—Ç–∞–∫):** –•–æ—Ç—è HMAC –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å *–≤–æ –≤—Ä–µ–º—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è*, –æ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–º —Å—Ç–∞—Ä–æ–π, –Ω–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ `initData`. –ü–æ—ç—Ç–æ–º—É –≤–∞—à –±—ç–∫–µ–Ω–¥ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–ª–µ `auth_date` (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ Unix) –≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–≤–µ–∂–∞—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–Ω—É—Ç –∏–ª–∏ —á–∞—Å–æ–≤, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–æ–≤ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è), —á—Ç–æ–±—ã —Å–º—è–≥—á–∏—Ç—å –∞—Ç–∞–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Å–≤–µ–∂–µ—Å—Ç–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–Ω—è –≤ `validate_init_data` –≤ `webapp/app.py`.

**–í –∏—Ç–æ–≥–µ:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º–∞ HMAC-SHA256 –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ `TELEGRAM_BOT_TOKEN`. –£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–≤ —Ç–æ—Ç –∂–µ —Ö–µ—à, –∫–æ—Ç–æ—Ä—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª Telegram, –≤–∞—à —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —è–≤–ª—è—é—Ç—Å—è –ø–æ–¥–ª–∏–Ω–Ω—ã–º–∏ (–æ—Ç Telegram), –Ω–µ–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–º–∏ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Å –≤–∞—à–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –±–æ—Ç–æ–º.

### –ü–æ—Ç–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (—ç–Ω–¥–ø–æ–∏–Ω—Ç `/validate`)

```mermaid
sequenceDiagram
    participant FE as –§—Ä–æ–Ω—Ç–µ–Ω–¥ WebApp
    participant BE as –ë—ç–∫–µ–Ω–¥ WebApp (app.py)
    participant Crypto as –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (hmac, hashlib)

    FE->>BE: POST /validate (initData)
    BE->>BE: –ü–∞—Ä—Å–∏–Ω–≥ initData (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ received_hash, other_data)
    BE->>BE: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ data_check_string (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ other_data, —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ)
    BE->>Crypto: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ secret_key = HMAC_SHA256("WebAppData", BOT_TOKEN)
    Crypto-->>BE: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç secret_key
    BE->>Crypto: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ expected_hash = HMAC_SHA256(secret_key, data_check_string)
    Crypto-->>BE: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç expected_hash
    BE->>BE: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ received_hash == expected_hash?
    alt –•–µ—à–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç
        BE->>BE: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–µ–∂–µ—Å—Ç–∏ auth_date
        alt auth_date OK
            BE-->>FE: 200 OK (status: 'success', user_info)
        else auth_date —É—Å—Ç–∞—Ä–µ–ª
            BE-->>FE: 403 Forbidden (status: 'error', message: '–î–∞–Ω–Ω—ã–µ —É—Å—Ç–∞—Ä–µ–ª–∏')
        end
    else –•–µ—à–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç
        BE-->>FE: 403 Forbidden (status: 'error', message: '–ù–µ–≤–µ—Ä–Ω—ã–π —Ö–µ—à')
    end
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é `user_info` (–æ—Å–æ–±–µ–Ω–Ω–æ `id`) –≤ –≤–∞—à–µ–º –±—ç–∫–µ–Ω–¥–µ `webapp/app.py` –¥–ª—è:

*   **–°–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ Flask (–∏–ª–∏ –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä JWT), —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–∞–ª—Å—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–º –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–∞—à–µ–º—É –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏.
*   **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** –ù–∞–π–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∑–∞–ª–æ–≥–∏–Ω—å—Ç–µ –µ–≥–æ. –ï—Å–ª–∏ –Ω–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –µ–º—É –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Å–≤—è–∑–∞–≤ –µ–≥–æ Telegram ID —Å –Ω–æ–≤–æ–π –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ.
*   **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è, —Ñ–∞–º–∏–ª–∏—é –∏–ª–∏ —è–∑—ã–∫–æ–≤–æ–π –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ `user_info`) –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–ø—ã—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   **API-–≤—ã–∑–æ–≤–æ–≤:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö), —Å –µ–≥–æ –ª–∏—á–Ω–æ—Å—Ç—å—é.

–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ `user_info` –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏–ª–∏ –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω–æ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ö–µ—à–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ.

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Telegram Web App –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–ª—è `hash`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –≤ —Å—Ç—Ä–æ–∫–µ `initData`, –∏ —Å–µ–∫—Ä–µ—Ç–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ `TELEGRAM_BOT_TOKEN`. –í–æ—Ç –ø–æ—á–µ–º—É —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ:

1.  **–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ Web App Telegram –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É `hash`. –≠—Ç–æ—Ç —Ö–µ—à —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—É—Ç–µ–º:
    *   –°–±–æ—Ä–∞ –≤—Å–µ—Ö –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö –∏–∑ `initData` (—Ç–∞–∫–∏—Ö –∫–∞–∫ `user`, `auth_date` –∏ —Ç. –¥.).
    *   –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —ç—Ç–∏—Ö –ø–æ–ª–µ–π –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø–æ –∫–ª—é—á—É.
    *   –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Ö –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å—Ç—Ä–æ–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `–∫–ª—é—á1=–∑–Ω–∞—á–µ–Ω–∏–µ1
–∫–ª—é—á2=–∑–Ω–∞—á–µ–Ω–∏–µ2...`).
    *   –í—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏ HMAC-SHA256 —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∏–∑ –≤–∞—à–µ–≥–æ `TELEGRAM_BOT_TOKEN`.

2.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞:** –í–∞—à –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–µ—Ä (`webapp/app.py` –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ) –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–æ–∫—É `initData`, –≤–∫–ª—é—á–∞—è `hash`. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –µ–µ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω:
    *   **–•—Ä–∞–Ω–∏—Ç—å `TELEGRAM_BOT_TOKEN` –≤ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π —Ç–∞–π–Ω–µ.** –û–Ω –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö.
    *   –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –¥–∞–Ω–Ω—ã—Ö —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞–ª Telegram (—É–¥–∞–ª–∏–≤ –ø–æ–ª–µ `hash`, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–≤ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å–æ–µ–¥–∏–Ω–∏–≤ –∏—Ö —Å–∏–º–≤–æ–ª–∞–º–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏).
    *   –ü–æ–ª—É—á–∏—Ç—å —Ç–æ—Ç –∂–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∏–∑ `TELEGRAM_BOT_TOKEN` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º HMAC (`HMAC(bot_token, "WebAppData")`).
    *   –í—ã—á–∏—Å–ª–∏—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–∂–∏–¥–∞–µ–º—ã–π —Ö–µ—à HMAC-SHA256, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –¥–∞–Ω–Ω—ã—Ö.
    *   **–°—Ä–∞–≤–Ω–∏—Ç—å** `hash`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞, —Å —Ö–µ—à–µ–º, –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

3.  **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å:**
    *   –ï—Å–ª–∏ —Ö–µ—à–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç, —ç—Ç–æ –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–≤–µ –≤–µ—â–∏:
        *   **–ü–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏—Å—Ö–æ–¥—è—Ç –æ—Ç Telegram –¥–ª—è *–≤–∞—à–µ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞*, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–æ–ª—å–∫–æ Telegram –∏ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (–∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π `TELEGRAM_BOT_TOKEN`) –º–æ–≥–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ö–µ—à.
        *   **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ –Ω–µ –±—ã–ª–∏ –ø–æ–¥–¥–µ–ª–∞–Ω—ã —Å –º–æ–º–µ–Ω—Ç–∞ –∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Telegram. –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–≤–µ–ª–æ –±—ã –∫ –¥—Ä—É–≥–æ–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∫ –Ω–µ—Å–æ–≤–ø–∞–¥–∞—é—â–µ–º—É —Ö–µ—à—É.

4.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ (–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):** –ü–æ–ª–µ `auth_date` (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ Unix), –≤–∫–ª—é—á–µ–Ω–Ω–æ–µ –≤ `initData`, —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–¥–∞–≤–Ω–∏–º, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∞—Ç–∞–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ä–∞—è –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ `initData`. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Å–≤–µ–∂–µ—Å—Ç–∏ (`validate_init_data` –≤ `webapp/app.py`).

**–í –∏—Ç–æ–≥–µ:** –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å (—Ö–µ—à HMAC-SHA256) –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –±—ç–∫–µ–Ω–¥–æ–º –≤–∞—à–µ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —è–≤–ª—è—é—Ç—Å—è –ø–æ–¥–ª–∏–Ω–Ω—ã–º–∏ –∏ –Ω–µ–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–º–∏, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –≤–∞—à `TELEGRAM_BOT_TOKEN` –æ—Å—Ç–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º. 